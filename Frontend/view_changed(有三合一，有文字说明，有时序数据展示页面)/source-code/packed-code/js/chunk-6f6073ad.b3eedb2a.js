(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f6073ad"],{"0220":function(t,e,a){"use strict";a("a374")},"08bd":function(t,e,a){"use strict";a.r(e);a("386d");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-monitor"},[e("h3",[t._v("Agent 状态监控（部署在不同主机用于采集数据）")]),e("el-row",{attrs:{gutter:20}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"source-child",attrs:{"element-loading-text":"加载中..."}},[e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("Agent 状态概览")])]),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"status-card online",attrs:{shadow:"hover"}},[e("div",{staticClass:"status-title"},[t._v("在线")]),e("div",{staticClass:"status-count"},[t._v(t._s(t.onlineCount))])])],1),e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"status-card offline",attrs:{shadow:"hover"}},[e("div",{staticClass:"status-title"},[t._v("离线")]),e("div",{staticClass:"status-count"},[t._v(t._s(t.offlineCount))])])],1)],1)],1)],1)],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"source-child",attrs:{"element-loading-text":"加载中..."}},[e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("Agent 状态分布")])]),e("div",{staticStyle:{height:"300px"},attrs:{id:"chart"}})])],1)],1)]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"source-child",attrs:{"element-loading-text":"加载中..."}},[e("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("Agent 详细信息")]),e("el-input",{staticStyle:{width:"200px",float:"right"},attrs:{placeholder:"搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.paginatedAgents}},[e("el-table-column",{attrs:{prop:"hostname",label:"主机名"}}),e("el-table-column",{attrs:{prop:"host_ip",label:"IP地址"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:"alive"===a.row.status?"success":"danger"}},[t._v("\n              "+t._s("alive"===a.row.status?"在线":"离线")+"\n            ")])]}}])}),e("el-table-column",{attrs:{prop:"uptime",label:"运行时间"}}),e("el-table-column",{attrs:{prop:"paths",label:"路径"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.showPaths(a.row.paths)}}},[t._v("\n              查看路径\n            ")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.filteredAgents.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),e("el-dialog",{attrs:{title:"路径列表",visible:t.dialogVisible,"modal-append-to-body":!1,"custom-class":"path-dialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-list",t._l(t.dialogPaths,(function(a,n){return e("el-list-item",{key:n},[e("pre",[t._v(t._s(a))])])})),1)],1)],1)},r=[],i=(a("8e6e"),a("456d"),a("ade3")),s=(a("96cf"),a("1da1")),o=(a("6b54"),a("6762"),a("2fdb"),a("ac6a"),a("8615"),a("cee4")),l=a("313e");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={data:function(){return{loading:!1,agents:[],search:"",dialogVisible:!1,dialogPaths:[],currentPage:1,pageSize:5}},computed:{onlineCount:function(){return this.agents.filter((function(t){return"alive"===t.status})).length},offlineCount:function(){return this.agents.length-this.onlineCount},filteredAgents:function(){var t=this;return this.agents.filter((function(e){return Object.values(e).some((function(e){return e.toString().toLowerCase().includes(t.search.toLowerCase())}))}))},paginatedAgents:function(){var t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.filteredAgents.slice(t,e)}},methods:Object(i["a"])({fetchData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,o["a"].get("http://43.138.200.89:8080/data/agent-info");case 4:e=t.sent,this.agents=e.data.map((function(t){return"offline"===t.status?u(u({},t),{},{hostname:t.hostname||"NONE",uptime:t.uptime||"NONE"}):t})),this.renderChart(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("Error fetching agent data:",t.t0),this.$message.error("获取代理数据失败，请稍后重试");case 13:return t.prev=13,this.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[1,9,13,16]])})));function e(){return t.apply(this,arguments)}return e}(),renderChart:function(){var t=this;this.$nextTick((function(){var e=l["init"](document.getElementById("chart")),a={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Agent 状态",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:t.onlineCount,name:"在线"},{value:t.offlineCount,name:"离线"}]}]};e.setOption(a)}))},showPaths:function(t){this.dialogPaths=t,this.dialogVisible=!0},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t}},"showPaths",(function(t){this.dialogPaths=t,this.dialogVisible=!0})),mounted:function(){this.fetchData()}},f=d,g=(a("0220"),a("2877")),h=Object(g["a"])(f,n,r,!1,null,"3a140af9",null);e["default"]=h.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"386d":function(t,e,a){"use strict";var n=a("cb7c"),r=a("83a1"),i=a("5f1b");a("214f")("search",1,(function(t,e,a,s){return[function(a){var n=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=s(a,t,this);if(e.done)return e.value;var o=n(t),l=String(this),c=o.lastIndex;r(c,0)||(o.lastIndex=0);var u=i(o,l);return r(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},"456d":function(t,e,a){var n=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(t){return r(n(t))}}))},"5eda":function(t,e,a){var n=a("5ca1"),r=a("8378"),i=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],s={};s[t]=e(a),n(n.S+n.F*i((function(){a(1)})),"Object",s)}},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),r=a("0bfb"),i=a("9e1e"),s="toString",o=/./[s],l=function(t){a("2aba")(RegExp.prototype,s,t,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?r.call(t):void 0)})):o.name!=s&&l((function(){return o.call(this)}))},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},8615:function(t,e,a){var n=a("5ca1"),r=a("504c")(!1);n(n.S,"Object",{values:function(t){return r(t)}})},"8e6e":function(t,e,a){var n=a("5ca1"),r=a("990b"),i=a("6821"),s=a("11e9"),o=a("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,n=i(t),l=s.f,c=r(n),u={},d=0;while(c.length>d)a=l(n,e=c[d++]),void 0!==a&&o(u,e,a);return u}})},"990b":function(t,e,a){var n=a("9093"),r=a("2621"),i=a("cb7c"),s=a("7726").Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(i(t)),a=r.f;return a?e.concat(a(t)):e}},a374:function(t,e,a){},f1ae:function(t,e,a){"use strict";var n=a("86cc"),r=a("4630");t.exports=function(t,e,a){e in t?n.f(t,e,r(0,a)):t[e]=a}}}]);
//# sourceMappingURL=chunk-6f6073ad.b3eedb2a.js.map