(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60c46e1c"],{"02f4":function(t,e,a){var r=a("4588"),s=a("be13");t.exports=function(t){return function(e,a){var n,o,l=String(s(e)),i=r(a),c=l.length;return i<0||i>=c?t?"":void 0:(n=l.charCodeAt(i),n<55296||n>56319||i+1===c||(o=l.charCodeAt(i+1))<56320||o>57343?t?l.charAt(i):n:t?l.slice(i,i+2):o-56320+(n-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var r=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},"2a19":function(t,e,a){"use strict";a("f6ac")},4917:function(t,e,a){"use strict";var r=a("cb7c"),s=a("9def"),n=a("0390"),o=a("5f1b");a("214f")("match",1,(function(t,e,a,l){return[function(a){var r=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,r):new RegExp(a)[e](String(r))},function(t){var e=l(a,t,this);if(e.done)return e.value;var i=r(t),c=String(this);if(!i.global)return o(i,c);var u=i.unicode;i.lastIndex=0;var p,d=[],h=0;while(null!==(p=o(i,c))){var g=String(p[0]);d[h]=g,""===g&&(i.lastIndex=n(c,s(i.lastIndex),u)),h++}return 0===h?null:d}]}))},9860:function(t,e,a){t.exports=a.p+"img/warehouse.c3fff222.jpg"},adbc:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"app","element-loading-text":"加载中..."}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("数据仓库监控")])]),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"totalUsageChart"}})]),e("el-col",{attrs:{span:12}},[e("img",{staticStyle:{width:"100%","max-height":"200px","object-fit":"contain","margin-bottom":"20px"},attrs:{src:a("9860"),fit:"contain","preview-src-list":[t.dataWarehouseStructureImage]}}),e("h4",[t._v("数据仓库实现技术")]),e("ul",[e("li",[t._v("分布式集群架构的多层数据仓库")]),e("li",[t._v("数据仓库分为数据采集层、数据存储与分析层和数据共享层三层。数据流在这三层之中逐级传递，最终为应用层提供数据支持。")]),e("li",[t._v("多层数据仓库结构整合了不同技术的优势特色，可以实现海量数据存储和动态扩容")])])])],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},t._l(t.warehousesData,(function(a,r){return e("el-col",{key:r,attrs:{span:12}},[e("el-card",{staticClass:"warehouse-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("\n              "+t._s(a.storage_name)+"\n              "),e("el-tooltip",{attrs:{content:t.getStorageDescription(a.storage_name),placement:"top-start"}},[e("i",{staticClass:"el-icon-question"})])],1)]),e("div",{staticClass:"warehouse-info"},[e("p",[t._v("已使用容量: "+t._s(a.used_space))]),e("p",[t._v("总容量: "+t._s(a.total_space))]),e("el-progress",{attrs:{percentage:t.calculatePercentage(a),color:t.determineColor(a)}}),e("el-collapse",{staticStyle:{"margin-top":"10px"}},[e("el-collapse-item",{attrs:{title:"查看子节点详情"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.nodes}},[e("el-table-column",{attrs:{prop:"node_name",label:"节点名称"}}),e("el-table-column",{attrs:{prop:"used_space",label:"已使用容量"}}),e("el-table-column",{attrs:{prop:"total_space",label:"总容量"}}),e("el-table-column",{attrs:{label:"使用率"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-progress",{attrs:{percentage:t.calculateNodePercentage(a.row),color:t.determineColor(a.row)}})]}}],null,!0)}),e("el-table-column",{attrs:{prop:"transactions",label:"事务提交"}}),e("el-table-column",{attrs:{prop:"rollbacks",label:"事务回滚"}}),e("el-table-column",{attrs:{prop:"blks_read",label:"块读取"}}),e("el-table-column",{attrs:{prop:"blks_hit",label:"块命中"}})],1)],1)],1)],1)])],1)})),1)],1)],1)},s=[],n=a("3835"),o=(a("4917"),a("96cf"),a("1da1")),l=a("313e"),i=a("cee4"),c={name:"App",data:function(){return{warehousesData:[],loading:!1,dataWarehouseStructureImage:"../assets/img/warehouse.jpg"}},mounted:function(){this.fetchData()},methods:{getStorageDescription:function(t){return"HDFS Storage"===t?"HDFS (Hadoop Distributed File System) 是数据存储与分析层的数据仓库，HDFS存储数据采集模块Agent采集的数据，并且直接将数据交付给KIDS引擎。":"Postgres Storage"===t?"PostgreSQL 是数据共享层的数据仓库，PostgreSQL获取规则引擎预检的数据和KIDS引擎交付的数据提供给应用层即接口和前端使用。":"数据存储系统"},fetchData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,i["a"].get("http://43.138.200.89:8080/data/stats");case 4:e=t.sent,this.warehousesData=e.data.warehouses,this.initTotalUsageChart(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("Error fetching data:",t.t0);case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[1,9,12,15]])})));function e(){return t.apply(this,arguments)}return e}(),calculatePercentage:function(t){var e=this.parseSize(t.used_space),a=this.parseSize(t.total_space);return console.log("使用量",e,a,t.used_space,t.total_space),console.log("使用率",Math.round(e/a*100)),Math.round(e/a*100)||0},calculateNodePercentage:function(t){var e=this.parseSize(t.used_space),a=this.parseSize(t.total_space);return Math.round(e/a*100)||0},parseSize:function(t){var e=t.match(/(\d+(\.\d+)?)\s*(\w+)/);if(!e)return 0;var a=Object(n["a"])(e,4),r=a[1],s=a[3],o={B:1,kB:1024,MB:1048576,GB:1073741824,TB:Math.pow(1024,4),PB:Math.pow(1024,5)};return parseFloat(r)*(o[s.toUpperCase()]||1)},determineColor:function(t){var e=this.calculatePercentage(t);return e>=90?"#FF4949":e>=70?"#F7BA2A":"#13CE66"},initTotalUsageChart:function(){var t=this,e=document.getElementById("totalUsageChart"),a=l["init"](e),r=this.warehousesData.reduce((function(e,a){return e+t.parseSize(a.used_space)}),0),s=this.warehousesData.reduce((function(e,a){return e+t.parseSize(a.total_space)}),0),n={title:{text:"总体使用情况",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} GB ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"容量",type:"pie",radius:"50%",data:[{value:r/1073741824,name:"已使用"},{value:(s-r)/1073741824,name:"未使用"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(n)}}},u=c,p=(a("2a19"),a("2877")),d=Object(p["a"])(u,r,s,!1,null,null,null);e["default"]=d.exports},f6ac:function(t,e,a){}}]);
//# sourceMappingURL=chunk-60c46e1c.d02162c4.js.map